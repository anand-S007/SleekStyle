<!DOCTYPE html>
<html class="no-js" lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/shop-checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Jul 2023 10:10:07 GMT -->

<head>
    <meta charset="utf-8">
    <title>Evara - eCommerce HTML Template</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon"
        href="/public/userAssets//public/userAssets/assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="/public/userAssets/assets/css/maind134.css?v=3.4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <!-- header -->
    <%-include('./header')-%>
        <div class="mobile-header-active mobile-header-wrapper-style">
            <div class="mobile-header-wrapper-inner">
                <div class="mobile-header-top">
                    <div class="mobile-header-logo">
                        <a href="/"><img src="/public/userAssets/assets/imgs/theme/sleek-style-logo.png" alt="logo"></a>
                    </div>
                    <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                        <button class="close-style search-close">
                            <i class="icon-top"></i>
                            <i class="icon-bottom"></i>
                        </button>
                    </div>
                </div>
                <div class="mobile-header-content-area">
                    <div class="mobile-search search-style-3 mobile-header-border">
                        <form action="#">
                            <input type="text" placeholder="Search for items…">
                            <button type="submit"><i class="fi-rs-search"></i></button>
                        </form>
                    </div>
                    <div class="mobile-menu-wrap mobile-header-border">
                        <div class="main-categori-wrap mobile-header-border">
                            <a class="categori-button-active-2" href="#">
                                <span class="fi-rs-apps"></span> Browse Categories
                            </a>
                            <div class="categori-dropdown-wrap categori-dropdown-active-small">
                                <ul>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-dress"></i>Women's
                                            Clothing</a></li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-tshirt"></i>Men's
                                            Clothing</a></li>
                                    <li> <a href="shop-grid-right.html"><i class="evara-font-smartphone"></i>
                                            Cellphones</a></li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-desktop"></i>Computer &
                                            Office</a></li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-cpu"></i>Consumer
                                            Electronics</a></li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-home"></i>Home & Garden</a>
                                    </li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-high-heels"></i>Shoes</a>
                                    </li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-teddy-bear"></i>Mother &
                                            Kids</a></li>
                                    <li><a href="shop-grid-right.html"><i class="evara-font-kite"></i>Outdoor fun</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- mobile menu start -->
                        <nav>
                            <ul class="mobile-menu">
                                <li><a href="/">Home</a></li>
                                <li><a href="/shop">shop</a></li>
                                <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                        href="#">Pages</a>
                                    <ul class="dropdown">
                                        <li><a href="page-about.html">About Us</a></li>
                                        <li><a href="page-contact.html">Contact</a></li>
                                        <li><a href="page-account.html">My Account</a></li>
                                        <li><a href="page-login-register.html">login/register</a></li>
                                        <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                        <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                        <li><a href="page-terms.html">Terms of Service</a></li>
                                        <li><a href="page-404.html">404 Page</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </nav>
                        <!-- mobile menu end -->
                    </div>
                    <div class="mobile-header-info-wrap mobile-header-border">
                        <div class="single-mobile-header-info mt-30">
                            <a href="page-contact.html"> Our location </a>
                        </div>
                        <div class="single-mobile-header-info">
                            <a href="/login">Log In / Sign Up </a>
                        </div>
                        <div class="single-mobile-header-info">
                            <a href="#">(+01) - 2345 - 6789 </a>
                        </div>
                    </div>
                    <div class="mobile-social-icon">
                        <h5 class="mb-15 text-grey-4">Follow Us</h5>
                        <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                        <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                        <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                        <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                        <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                    </div>
                </div>
            </div>
        </div>
        <main class="main">
            <div class="page-header breadcrumb-wrap">
                <div class="container">
                    <div class="breadcrumb">
                        <a href="/" rel="nofollow">Home</a>
                        <span></span> <a href="/shop">Shop</a>
                        <span></span> Checkout
                    </div>
                </div>
            </div>
            <section class="mt-50 mb-50">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="toggle_info">
                                <span><i class="fi-rs-label mr-10"></i><span class="text-muted">Have a coupon?</span> <a
                                        href="#coupon" data-bs-toggle="collapse" class="collapsed"
                                        aria-expanded="false">Click here to enter your code</a></span>
                            </div>
                            <div class="panel-collapse collapse coupon_form " id="coupon">
                                <div class="panel-body">
                                    <p class="mb-30 font-sm">If you have a coupon code, please apply it below.</p>
                                    <form id="couponFormId">
                                        <div class="form-group">
                                            <input id="couponCodeId" type="text" placeholder="Enter Coupon Code...">
                                        </div>
                                        <div class="form-group d-flex gap-3">
                                            <button id="applyCouponBtnId" class="btn btn-md" type="button"
                                                onclick="applyCoupon()" name="login">Apply Coupon</button>
                                            <button id="showCouponBtnId" class="btn btn-md " type="button"
                                                data-bs-toggle="modal" data-bs-target="#couponModal">Show
                                                Coupons</button>
                                            <button id="removeCouponBtnId" style="display: none;" class="btn btn-md"
                                                type="button" onclick="removeCoupon()">Remove coupon</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="couponModal" tabindex="-1" aria-labelledby="couponModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="couponModalLabel">Available Coupons</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="coupon-list">
                                        <% coupons.forEach((item)=>{ %>
                                            <% if(item.expiryDate>= Date.now()){ %>
                                                <div class="coupon-item d-flex justify-content-between">
                                                    <p>Coupon Code: <span class="coupon-code">
                                                            <%=item.code %>
                                                        </span></p>
                                                    <button style="background:none;border: none;" class="copy-btn"
                                                        data-coupon="<%=item.code %>">Copy</button>
                                                </div>
                                                <% } %>
                                                    <% }) %>

                                                        <!-- Add more coupons as needed -->
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="divider mt-50 mb-50"></div>
                        </div>
                    </div>
                    <div class="row">
                        <a href="/checkout/add_address?userId=<%=user._id %>"><i class="bi bi-plus-lg"></i>Add new
                            address</a>
                        <div class="col-md-6">
                            <div class="row">
                                <% if(user_address && user_address.addresses.length> 0){ %>
                                    <% user_address.addresses.slice(0, 2).forEach((data, index)=> { %>
                                        <div class="col-md-6 col-12 mb-3 address-card">
                                            <div class="card mb-3 mb-lg-0">
                                                <div class="card-header d-flex justify-content-between">
                                                    <h5 class="mb-0">Billing Address</h5>
                                                    <input type="radio" class="radioBtn" value="<%=data._id%>"
                                                        onclick="handleSelectAddress(this,'<%=data._id%>')"
                                                        name="option" <% if(index==0){ %>
                                                    checked
                                                    <% } %>
                                                        style="width:15px; height:15px;">
                                                </div>
                                                <div class="card-body">
                                                    <address>
                                                        <%= data.name %><br>
                                                            <%= data.address %>,<br>
                                                                <%= data.district %>.<br>
                                                                    <%= data.pincode %> <br>
                                                                        <%= data.state %> <br>
                                                                            <%= data.mobile %>
                                                    </address>
                                                    <a href="/checkout/edit_address?addressId=<%=data._id %>"
                                                        class="btn btn-small">Edit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <% }) %>

                                            <% if(user_address.addresses.length> 2) { %>
                                                <div id="moreAddresses" class="collapse">
                                                    <div class="row">
                                                        <% user_address.addresses.slice(2).forEach((data, index)=> { %>
                                                            <div class="col-md-6 col-12 mb-3 address-card">
                                                                <div class="card mb-3 mb-lg-0">
                                                                    <div
                                                                        class="card-header d-flex justify-content-between">
                                                                        <h5 class="mb-0">Billing Address</h5>
                                                                        <input type="radio" name="option"
                                                                            class="radioBtn" value="<%=data._id%>"
                                                                            onclick="handleSelectAddress(this,'<%=data._id%>')"
                                                                            style="width:15px; height:15px;">
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <address id="address_id">
                                                                            <%= data.name %><br>
                                                                                <%= data.address %>,<br>
                                                                                    <%= data.district %>. <br>
                                                                                        <%= data.pincode %> <br>
                                                                                            <%= data.state %> <br>
                                                                                                <%= data.mobile %>
                                                                        </address>
                                                                        <a href="/checkout/edit_address?addressId=<%=data._id %>"
                                                                            class="btn btn-small">Edit</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <% }) %>
                                                    </div>
                                                </div>
                                                <div class="col-12 text-center">
                                                    <button style="background-color: white;border: none;color: #088178;"
                                                        class="btn" type="button" id="viewmoreBtnId"
                                                        onclick="changeViewBtnTxt()" data-bs-toggle="collapse"
                                                        data-bs-target="#moreAddresses">
                                                        View More <i class="fas fa-angle-double-down"></i>
                                                    </button>
                                                </div>
                                                <% } %>
                                                    <% } %>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="order_review">
                                <div class="mb-20">
                                    <h4>Your Orders</h4>
                                </div>
                                <div class="table-responsive order_table text-center">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th colspan="2">Product</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% if(cartData){ %>
                                                <% cartData.items.forEach((data)=>{ %>
                                                    <tr>
                                                        <td class="image product-thumbnail"><img
                                                                src="/uploads/<%=data.productId.image[0] %>" alt="#">
                                                        </td>
                                                        <td>
                                                            <h5><a href="shop-product-full.html"></a>
                                                                <%=data.productId.title %>
                                                            </h5> <span class="product-qty">x <%=data.quantity %></span>
                                                        </td>
                                                        <td>Rs <span id="subTotalPriceId">
                                                                <%=data.subTotalPrice %>
                                                            </span>
                                                        </td>
                                                    </tr>

                                                    <% }) %>
                                                        <% } %>


                                                            <tr>
                                                                <th>Shipping</th>
                                                                <td colspan="2"><em>Free Shipping</em></td>
                                                            </tr>
                                                            <tr id="couponPriceRowId" style="display: none;">
                                                                <th>Coupon</th>
                                                                <td colspan="2" id="couponPriceId">Apply coupon</td>
                                                            </tr>
                                                            <tr>
                                                                <th>Total amount</th>
                                                                <td colspan="2" class="product-subtotal"><span
                                                                        class="font-xl text-brand fw-900">
                                                                        Rs <span id="totalPriceId">
                                                                            <%=cartData?cartData.totalPrice:0 %>
                                                                        </span>
                                                                    </span></td>
                                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                <div class="payment_method">
                                    <div class="mb-25">
                                        <h5>Payment</h5>
                                    </div>
                                    <div class="payment_option">

                                        <div class="custome-radio">
                                            <input class="form-check-input" required="" type="radio"
                                                onclick="handlePaymentMethod(this,'cod')" name="payment_option"
                                                id="exampleRadios4" checked value="cod">
                                            <label class="form-check-label" for="exampleRadios4"
                                                data-bs-toggle="collapse" data-target="#checkPayment"
                                                aria-controls="checkPayment">Cash on delivery(COD)</label>
                                            <div class="form-group collapse in" id="checkPayment">
                                                <p class="text-muted mt-5">Please send your cheque to Store Name, Store
                                                    Street, Store Town, Store State / County, Store Postcode. </p>
                                            </div>
                                        </div>
                                        <div class="custome-radio">
                                            <input class="form-check-input" required="" type="radio"
                                                onclick="handlePaymentMethod(this,'razorpay')" name="payment_option"
                                                id="exampleRadios5" value="razorpay">
                                            <label class="form-check-label" for="exampleRadios5"
                                                data-bs-toggle="collapse" data-target="#paypal"
                                                aria-controls="paypal">Razorpay</label>
                                            <div class="form-group collapse in" id="paypal">
                                                <p class="text-muted mt-5">Pay via Razorpay; you can pay with your
                                                    credit
                                                    card if you don't have a Razorpay account.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a onclick="placeOrder('<%=cartData?cartData._id:null%>')"
                                    class="btn btn-fill-out btn-block mt-30">Place Order</a>
                            </div>
                        </div>
                    </div>

                </div>
                </div>
            </section>
        </main>
        <footer class="main">
            <section class="newsletter p-30 text-white wow fadeIn animated">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-7 mb-md-3 mb-lg-0">
                            <div class="row align-items-center">
                                <div class="col flex-horizontal-center">
                                    <img class="icon-email"
                                        src="/public/userAssets/assets/imgs/theme/icons/icon-email.svg" alt="">
                                    <h4 class="font-size-20 mb-0 ml-3">Sign up to Newsletter</h4>
                                </div>
                                <div class="col my-4 my-md-0 des">
                                    <h5 class="font-size-15 ml-4 mb-0">...and receive <strong>$25 coupon for first
                                            shopping.</strong></h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <!-- Subscribe Form -->
                            <form class="form-subcriber d-flex wow fadeIn animated">
                                <input type="email" class="form-control bg-white font-small"
                                    placeholder="Enter your email">
                                <button class="btn bg-dark text-white" type="submit">Subscribe</button>
                            </form>
                            <!-- End Subscribe Form -->
                        </div>
                    </div>
                </div>
            </section>
            <section class="section-padding footer-mid">
                <div class="container pt-15 pb-20">
                    <div class="row">
                        <div class="col-lg-4 col-md-6">
                            <div class="widget-about font-md mb-md-5 mb-lg-0">
                                <div class="logo logo-width-1 wow fadeIn animated">
                                    <a href="/"><img src="/public/userAssets/assets/imgs/theme/sleek-style-logo.png"
                                            alt="logo"></a>
                                </div>
                                <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                                <p class="wow fadeIn animated">
                                    <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                                </p>
                                <p class="wow fadeIn animated">
                                    <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                                </p>
                                <p class="wow fadeIn animated">
                                    <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                                </p>
                                <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                                <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                                    <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-facebook.svg"
                                            alt=""></a>
                                    <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-twitter.svg"
                                            alt=""></a>
                                    <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-instagram.svg"
                                            alt=""></a>
                                    <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-pinterest.svg"
                                            alt=""></a>
                                    <a href="#"><img src="/public/userAssets/assets/imgs/theme/icons/icon-youtube.svg"
                                            alt=""></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-3">
                            <h5 class="widget-title wow fadeIn animated">About</h5>
                            <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Delivery Information</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Terms &amp; Conditions</a></li>
                                <li><a href="#">Contact Us</a></li>
                                <li><a href="#">Support Center</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-2  col-md-3">
                            <h5 class="widget-title wow fadeIn animated">My Account</h5>
                            <ul class="footer-list wow fadeIn animated">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="#">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                                <li><a href="#">Order</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-4">
                            <h5 class="widget-title wow fadeIn animated">Install App</h5>
                            <div class="row">
                                <div class="col-md-8 col-lg-12">
                                    <p class="wow fadeIn animated">From App Store or Google Play</p>
                                    <div class="download-app wow fadeIn animated">
                                        <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active"
                                                src="/public/userAssets/assets/imgs/theme/app-store.jpg" alt=""></a>
                                        <a href="#" class="hover-up"><img
                                                src="/public/userAssets/assets/imgs/theme/google-play.jpg" alt=""></a>
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                                    <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                                    <img class="wow fadeIn animated"
                                        src="/public/userAssets/assets/imgs/theme/payment-method.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="container pb-20 wow fadeIn animated">
                <div class="row">
                    <div class="col-12 mb-20">
                        <div class="footer-bottom"></div>
                    </div>
                    <div class="col-lg-6">
                        <p class="float-md-left font-sm text-muted mb-0">&copy; 2024, <strong class="text-brand">Sleek
                                Style</strong> - Mens fashion store </p>
                    </div>
                    <div class="col-lg-6">
                        <p class="text-lg-end text-start font-sm text-muted mb-0">
                            Designed by <a href="http://alithemes.com/" target="_blank">Alithemes.com</a>. All rights
                            reserved
                        </p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Preloader Start -->
        <div id="preloader-active">
            <div class="preloader d-flex align-items-center justify-content-center">
                <div class="preloader-inner position-relative">
                    <div class="text-center">
                        <h5 class="mb-5">Now Loading</h5>
                        <div class="loader">
                            <div class="bar bar1"></div>
                            <div class="bar bar2"></div>
                            <div class="bar bar3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--View more button of address selection -->
        <script>
            async function changeViewBtnTxt() {
                let viewMoreBtn = document.getElementById('viewmoreBtnId');
                let viewMoreBtnTxt = viewMoreBtn.innerText.trim(); // Use trim() to remove any extra spaces around the text

                if (viewMoreBtnTxt.startsWith('View More')) {
                    viewMoreBtn.innerHTML = 'View Less <i class="fas fa-angle-double-up"></i>';
                } else {
                    viewMoreBtn.innerHTML = 'View More <i class="fas fa-angle-double-down"></i>';
                }
            }

        </script>

        <script>
            // Coupon priceId, totalPriceId and code
            const couponPriceId = document.getElementById('couponPriceId')
            const totalPriceId = document.getElementById('totalPriceId')

            // couponDiscount amount
            let couponDiscount

            // Address selection
            let selectedAddressId = ''
            const radioBtn = document.querySelectorAll('.radioBtn')
            radioBtn.forEach(element => {
                if (element.checked) {
                    selectedAddressId = element.value;
                }
            })
            async function handleSelectAddress(checkbox, addressId) {
                if (checkbox.checked) {
                    selectedAddressId = addressId
                }
            }

            //Default payment selection
            let paymentMethod = ''
            const paymentRadio = document.querySelectorAll('.form-check-input')
            paymentRadio.forEach((element) => {
                if (element.checked) {
                    paymentMethod = element.value
                }
            })

            // Payment selection by user
            async function handlePaymentMethod(checkbox, payMethod) {
                try {
                    if (checkbox.checked) {
                        paymentMethod = payMethod
                    }
                } catch (error) {
                    console.log(error);
                }
            }

            // apply coupon
            async function applyCoupon() {
                const applyCouponBtnId = document.getElementById('applyCouponBtnId')
                const showCouponBtnId = document.getElementById('showCouponBtnId')
                const removeCouponBtnId = document.getElementById('removeCouponBtnId')
                const couponPriceRowId = document.getElementById('couponPriceRowId')

                try {
                    const couponCode = couponCodeId.value
                    fetch("/checkout/apply_coupon", {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ couponCode })
                    })
                        .then(res => res.json())
                        .then((res) => {
                            if (res.success) {
                                const Toast = Swal.mixin({
                                    toast: true,
                                    position: 'centre',
                                    iconColor: 'green',
                                    customClass: {
                                        popup: 'colored-toast',
                                    },
                                    showConfirmButton: false,
                                    timer: 1900,
                                    timerProgressBar: false,
                                })
                                Toast.fire({
                                    icon: 'success',
                                    title: res.message,
                                })
                                    .then(res => res)
                                applyCouponBtnId.style.display = 'none'
                                showCouponBtnId.style.display = 'none'
                                removeCouponBtnId.style.display = 'block'
                                couponPriceRowId.style.display = 'contents'
                                couponPriceId.innerText = res.discount
                                couponDiscount = res.discount
                                totalPriceId.innerText = res.totalPrice - res.discount
                                couponCodeId.disabled = true
                            } else {
                                const Toast = Swal.mixin({
                                    toast: true,
                                    position: 'centre',
                                    iconColor: 'red',
                                    customClass: {
                                        popup: 'colored-toast',
                                    },
                                    showConfirmButton: false,
                                    timer: 1900,
                                    timerProgressBar: false,
                                })
                                Toast.fire({
                                    icon: 'error',
                                    title: res.message,
                                })
                                    .then(res => res)
                            }
                        })
                } catch (error) {
                    console.log(error);
                }
            }

            // Remove coupon
            async function removeCoupon() {
                try {
                } catch (error) {
                    console.log(error);
                }
            }

            // Place order 
            async function placeOrder(cartId) {
                const couponPriceRowId = document.getElementById('couponPriceRowId')
                fetch('/checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        cartId,
                        selectedAddressId,
                        paymentMethod,
                        couponDiscount: couponDiscount ? couponDiscount : null,
                        couponCode: couponCodeId.value ? couponCodeId.value : null,
                        totalPrice: totalPriceId.innerText
                    })
                })
                    .then((res) => {
                        return res.json()
                    })
                    .then((res) => {
                        if (res.success == false) {
                            window.location.href = '/viewcart'
                        } else if (res.success) {
                            let timerInterval;
                            Swal.fire({
                                title: "Processing",
                                html: " <b></b> ",
                                timer: 2000,
                                timerProgressBar: true,
                                didOpen: () => {
                                    Swal.showLoading();
                                    const timer = Swal.getPopup().querySelector("b");
                                    timerInterval = setInterval(() => {
                                        timer.textContent = `${Swal.getTimerLeft()}`;
                                    }, 100);
                                },
                                willClose: () => {
                                    clearInterval(timerInterval);
                                }
                            }).then((result) => {
                                if (result.dismiss === Swal.DismissReason.timer) {
                                    window.location.href = '/checkout/orderSuccess'
                                }
                            });
                        } else if (res.status == 'razorpay') {
                            console.log('response:',res);
                            razorPayment(res)
                        }
                        else {
                            throw new error('Error while order placing in cash on delivery')
                        }
                    })
            }

            function razorPayment(order) {
                var options = {
                    "key": process.env.keyId, // Enter the Key ID generated from the Dashboard
                    "amount": order.order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                    "currency": "INR",
                    "name": "Sleek Style mens fashion store", //your business name
                    "description": "Order payment",
                    "image": "https://example.com/your_logo",
                    "order_id": order.order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                    "callback_url": "https://eneqd3r9zrjok.x.pipedream.net/",
                    "prefill": { //We recommend using the prefill parameter to auto-fill customer's contact information especially their phone number
                        "name": order.address.name, //your customer's name
                        "email": "gaurav.kumar@example.com",
                        "contact": order.address.mobile //Provide the customer's phone number for better conversion rates 
                    },
                    "notes": {
                        "address": "Razorpay Corporate Office"
                    },
                    "theme": {
                        "color": "#3399cc"
                    }
                };
            }
        </script>

        <!-- Custom JS for coupon modal window -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const copyButtons = document.querySelectorAll('.copy-btn');

                copyButtons.forEach(button => {
                    button.addEventListener('click', function () {
                        const couponCode = this.getAttribute('data-coupon');
                        navigator.clipboard.writeText(couponCode).then(() => {
                            alert(`Coupon code ${couponCode} copied to clipboard`);
                        }).catch(err => {
                            console.error('Failed to copy text: ', err);
                        });
                    });
                });
            });
        </script>

        <!---Razorpay CDN -->
        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <!-- Vendor JS-->
        <script src="/public/userAssets/assets/js/vendor/modernizr-3.6.0.min.js"></script>
        <script src="/public/userAssets/assets/js/vendor/jquery-3.6.0.min.js"></script>
        <script src="/public/userAssets/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
        <script src="/public/userAssets/assets/js/vendor/bootstrap.bundle.min.js"></script>
        <script src="/public/userAssets/assets/js/plugins/slick.js"></script>
        <script src="/public/userAssets/assets/js/plugins/jquery.syotimer.min.js"></script>
        <script src="/public/userAssets/assets/js/plugins/wow.js"></script>
        <script src="/public/userAssets/assets/js/plugins/jquery-ui.js"></script>
        <script src="/public/userAssets/assets/js/plugins/perfect-scrollbar.js"></script>
        <script src="/public/userAssets/assets/js/plugins/magnific-popup.js"></script>
        <script src="/public/userAssets/assets/js/plugins/select2.min.js"></script>
        <script src="/public/userAssets/assets/js/plugins/waypoints.js"></script>
        <script src="/public/userAssets/assets/js/plugins/counterup.js"></script>
        <script src="/public/userAssets/assets/js/plugins/jquery.countdown.min.js"></script>
        <script src="/public/userAssets/assets/js/plugins/images-loaded.js"></script>
        <script src="/public/userAssets/assets/js/plugins/isotope.js"></script>
        <script src="/public/userAssets/assets/js/plugins/scrollup.js"></script>
        <script src="/public/userAssets/assets/js/plugins/jquery.vticker-min.js"></script>
        <!-- Template  JS -->
        <script src="/public/userAssets/assets/js/maind134.js?v=3.4"></script>
        <script src="/public/userAssets/assets/js/shopd134.js?v=3.4"></script>
</body>

<style>

</style>
<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/shop-checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Jul 2023 10:10:07 GMT -->

</html>