<%-include('../head')-%>

<!--Header section -->
    <%-include('../header')-%>
    
        <main class="main">
            <div class="page-header breadcrumb-wrap">
                <div class="container">
                    <div class="breadcrumb">
                        <a href="/" rel="nofollow">Home</a>
                        <span></span> Account
                    </div>
                </div>
            </div>
            <section class="pt-150 pb-150">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-10 m-auto">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashboard-menu">
                                        <ul class="nav flex-column" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link" href="/user_account/dashboard"><i
                                                        class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link active" href="/user_account/orderList" role="tab"
                                                    aria-controls="orders" aria-selected="false"><i
                                                        class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link " id="walletId" href="/user_account/wallet" ><i class="fi-rs-shopping-cart-check mr-10"></i>Wallet</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link " href="/user_account/address"><i
                                                        class="fi-rs-marker mr-10"></i>My Address</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="/user_account/user_details" role="tab"
                                                    aria-controls="account-detail" aria-selected="true"><i
                                                        class="fi-rs-user mr-10"></i>Account details</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="/logout"><i
                                                        class="fi-rs-sign-out mr-10"></i>Logout</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="tab-content dashboard-content">
                                        <div class="tab-pane fade active show" id="orders" role="tabpanel"
                                            aria-labelledby="orders-tab">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="mb-0">Your Orders</h5>
                                                </div>
                                                <div class="card-body">
                                                    <div class="table-responsive">
                                                        <%if(orderData){ %>
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <th>Order</th>
                                                                    <th>Order Date</th>
                                                                    <th>Status</th>
                                                                    <th>Total</th>
                                                                    <th>Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                    <% orderData[0].orders.forEach((item)=>{ %>
                                                                    <tr>
                                                                        <td>
                                                                            <%=item.orderId %>
                                                                        </td>
                                                                        <td>
                                                                            <%=new Date(item.createdAt).toLocaleDateString()%>
                                                                        </td>
                                                                        <td>
                                                                            <%=item.status %>
                                                                        </td>
                                                                        <td>Rs <%=item.totalPrice %>
                                                                        </td>
                                                                        <td class="d-flex gap-3 justify-content-center">
                                                                            <a href="/user_account/orderDetails?orderId=<%=item._id %>">View</a>
                                                                            <!-- <a href="#" class="text-danger">Cancel</a> -->
                                                                        </td>
                                                                    </tr>
                                                                    <% }) %>
                                                                    
                                                                </tbody>
                                                            </table>
                                                            <% }else{ %>
                                                                <h4>Order is empty!</h4>
                                                                <% } %>
                                                    </div>
                                                    <!-- -Pagination controll --> 
                                                    <!-- <nav aria-label="Page navigation example">
                                                        <ul class="pagination justify-content-end">
                                                          <li class="page-item disabled">
                                                            <a class="page-link" href="#" onclick="changePage('previous')" tabindex="-1">Previous</a>
                                                          </li>
                                                          <li class="page-item"><a class="page-link" href="#">1</a></li>
                                                          <li class="page-item">
                                                            <a class="page-link" onclick="changePage('next')">Next</a>
                                                          </li>
                                                        </ul>
                                                    </nav> -->
                                                    <nav aria-label="Page navigation example">
                                                        <ul class="pagination justify-content-end">
                                                            <li class="page-item <%= currentPage <= 1 ? 'disabled' : '' %>">
                                                                <a class="page-link" href="?page=<%= parseInt(currentPage) - 1 %>" tabindex="-1">Previous</a>
                                                            </li>
                                                            
                                                            <li class="page-item disabled">
                                                                <a class="page-link" ><%= currentPage %></a>
                                                            </li>
                                                            <li class="page-item <%= currentPage >= totalPages ? 'disabled' : '' %>">
                                                                <a class="page-link" href="?page=<%= parseInt(currentPage)+1 %>">Next</a>
                                                            </li>
                                                        </ul>
                                                    </nav>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>


        <%-include('../foot') %>